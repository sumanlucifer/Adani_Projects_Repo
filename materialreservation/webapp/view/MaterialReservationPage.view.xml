<mvc:View controllerName="com.agel.mmts.materialreservation.controller.MaterialReservationPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns="sap.m"
    xmlns:fm="sap.ui.layout.form"
    xmlns:f="sap.f">
    <f:DynamicPage showFooter="true" headerExpanded="true" busy="{objectViewModel>/busy}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title id="pageTitle" text="{i18n>CreateIssueReservation}"/>
                </f:heading>
                <f:actions>
                    <HBox visible="{= ${objectViewModel>/isButtonVisible} ? true : true}">
                        <Button text="{i18n>Save}" id="idBtnSubmit" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                        <Button text="{i18n>Reset}" class="sapUiTinyMarginBegin" press="onCancelReservation" />
                    </HBox>
                    <!-- <Button text="Raise Return Material Request" press="onConfirmRequest" type="Emphasized"/> -->
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <VBox alignContent="SpaceBetween">
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="3" singleContainerFullSize="false" class="style-RemoveTitleHeight">
                            <fm:toolbar>
                            </fm:toolbar>
                            <fm:content>
                                <Toolbar>
                                    <ToolbarSpacer />
                                    <Button visible="{= ${objectViewModel>/isButtonVisible} ? true : false}" text="Go" type="Emphasized" press="onPressGo"/>
                                   
                                </Toolbar>
                                <Label  text="{i18n>MovementType}" required="true"/>
                                <Select id="idSelMovementType" change="onMoventTypeChange" editable="false" selectedKey="{HeaderDetailsModel>MovementType}" forceSelection="false" items="{HeaderDetailsModel>/movementTypeVal}">
                                    <core:Item key="{HeaderDetailsModel>value}" text="{HeaderDetailsModel>Text}" />
                                </Select>
                                <Label text="{i18n>Plant}" required="true"/>
                                <Select id="idPlant" forceSelection="false" selectedKey="{HeaderDetailsModel>Plant}" items="{
                                path: '/MasterPlantDetailSet' 
                                }">
                                    <core:Item key="{PlantId}" text="{PlantId} - {Name}" />
                                </Select>
                                <Label  text="{i18n>StorageLocation}" required="true"/>
                                <Input id="idStorageLocation" value="{HeaderDetailsModel>StorageLocation}" />                                    
                                <Label  text="{i18n>UnloadingPoint}" required="true"/>
                                <Input id="idUnloadPoint" value="{HeaderDetailsModel>UnloadPoint}" />
                            </fm:content>
                        </fm:SimpleForm>
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="3" singleContainerFullSize="false" class="style-RemoveTitleHeight">
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}"  text="{i18n>CompanyCode}"  required="true"/>
                            <Select visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idSelCompanyCode" forceSelection="false" selectedKey="{HeaderDetailsModel>CompanyCode}" items="{
						    path: '/MasterCompanyCodeSet'						    
					        }">
                                <core:Item key="{ID}" text="{CompanyCode} - {Name}" />
                            </Select>

                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>GoodRecipientSONumber}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idGoodReciept" value="{HeaderDetailsModel>GoodsRecipient}" />
                            
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>RecievingLocation}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idRecievingLocation" value="{HeaderDetailsModel>ReceivingLocation}" />
                            
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>CostCenter}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idCostCenter" value="{HeaderDetailsModel>CostCenter}" />
                            
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>GLAccount}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idGLAccount" value="{HeaderDetailsModel>GLAccount}" />
                            
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>ContractorName}"  required="true"/>
                            <!-- <Select visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idContractor" change="onVendorSelected" selectedKey="{HeaderDetailsModel>ContractorId}" forceSelection="false" items="{/VendorSet}">
                                <core:Item key="{ID}" text="{Name} - {VendorCode}" />
                            </Select> -->
                              <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idContractor" value="{HeaderDetailsModel>ContractorId}" />
                            
                        </fm:SimpleForm>
                    </VBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <!-- DynamicPage Content -->
        <f:content>
            <VBox>
                <Table visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}" items="{reservationTableModel>/}" growingThreshold="5" growing="true" fixedLayout="false">
                    <headerToolbar>
                        <OverflowToolbar >
                            <Title text="{i18n>lineItems}" level="H4" />
                            <content>
                                <ToolbarSpacer></ToolbarSpacer>
                                <Button text="{i18n>Add}" icon="sap-icon://add" press="onAddReservationItemsPress"></Button>
                            </content>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column >
                            <Text text="{i18n>MaterialCode}" />
                        </Column>
                        <Column>
                            <Text text="{i18n>MaterialName}" />
                        </Column>
                        <Column>
                            <Text text="{i18n>StorageLocation}" />
                        </Column>
                        <Column>
                            <Text text="{i18n>AvailableQuantity}" />
                        </Column>
                        <Column>
                            <Text text="{i18n>UOM}" />
                        </Column>
                        <Column>
                            <Text text="{i18n>Quantity}" />
                        </Column>
                        <!-- <Column>
                            <Text text="{i18n>Unload Point}" />
                        </Column> -->
                        <Column>
                            <Text text="{i18n>Batch}" />
                        </Column>
                        <Column>
                            <Text text="{i18n>M}" />
                        </Column>
                        <Column width="5%">
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem >
                            <cells>
                                <Input
                                    suggestionItemSelected="onMaterialCodeChange" 
                                    selectedKey="{reservationTableModel>MaterialCode}" 
                                    selectedItem="{reservationTableModel>MaterialCode}"    
                                    id="idPMaterialCode" 
                                    showSuggestion="true"
                                    placeholder="Enter Material Code"
                                    suggestionItems="{suggestionModel>/}">
                                    <suggestionItems>
                                        <core:ListItem text="{suggestionModel>MaterialCode}" additionalText="{suggestionModel>Name}"/>
                                    </suggestionItems>
                                </Input>
                                <Text text="{reservationTableModel>Description}"/>
                                <Text text="{reservationTableModel>StorageLocation}"/>
                                <Text text="{reservationTableModel>AvailableQty}"/>
                                <Text text="{reservationTableModel>BaseUnit}"/>
                                <VBox>
                                    <Input width="80%" liveChange="onLiveChangeQty" value="{reservationTableModel>Quantity}" editable="{= ${reservationTableModel>BaseUnit}==='MT' ? false: true }"/>
                                    <Link text="{= ${reservationTableModel>BaseUnit} ? ${reservationTableModel>BaseUnit} === 'MT' ? 'Manage BOQ Qty' : 'View BOQ Qty' : '' }" enabled="{= ${reservationTableModel>IsBOQApplicable} ? ${reservationTableModel>IsBOQApplicable} : false }" press="onManageBOQQtyPress" />
                                </VBox>
                                <!-- <Text text="{reservationTableModel>UnloadPoint}"/> -->
                                <Input value="{reservationTableModel>Batch}"/>
                                <CheckBox selected="{reservationTableModel>M}" />
                                <Button icon="sap-icon://delete" press="onDeleteReservationItemPress" type="Transparent"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>
