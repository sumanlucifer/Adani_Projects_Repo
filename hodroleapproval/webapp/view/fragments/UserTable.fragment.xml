<core:FragmentDefinition xmlns="sap.m"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:core="sap.ui.core">
    <smartTable:SmartTable class="sapUiResponsiveContentPadding" id="idApproveRejectRolesTBL" editable="false" placeToolbarInTable="true" 
    enableAutoBinding="true" entitySet="MapHODAndSelfRoleAssignRequestSet" showFullScreenButton="true" showRowCount="false" tableType="ResponsiveTable" 
    demandPopin="false" useExportToExcel="false" useTablePersonalisation="true" useVariantManagement="false" beforeRebindTable="onBeforeRebindApprovalRequestsTable"  
    >
        <smartTable:layoutData><FlexItemData growFactor="1"/></smartTable:layoutData>
        <Table sticky="ColumnHeaders,HeaderToolbar">
            <columns>
                 <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "UserId", "leadingProperty": "UserId",
                                                 "columnIndex": 0 ,"sortProperty": "UserId","filterProperty": "UserId"}'/>
                    </customData>
                    <Text text="{i18n>UserId}"/>
                </Column>
              
                 <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "RoleAssignId/Role", "leadingProperty": "RoleAssignId/Role",
                                                 "columnIndex": 1 ,"sortProperty": "RoleAssignId/Role","filterProperty": "RoleAssignId/Role"}'/>
                    </customData>
                    <Text text="{i18n>role}"/>
                </Column>

                <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Email", "leadingProperty": "Email",
                                                 "columnIndex": 2 ,"sortProperty": "Email","filterProperty": "Email"}'/>
                    </customData>
                    <Text text="{i18n>email}"/>
                </Column>
                 <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "RoleAssignId/RequestNumber", "leadingProperty": "RoleAssignId/RequestNumber",
                                                 "columnIndex": 3 ,"sortProperty": "RoleAssignId/RequestNumber","filterProperty": "RoleAssignId/RequestNumber"}'/>
                    </customData>
                    <Text text="{i18n>requestnumber}"/>
                </Column>

                <Column demandPopin="true" minScreenWidth="Tablet">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "RoleAssignId/CreatedAt", "leadingProperty": "RoleAssignId/CreatedAt",
                                                 "columnIndex": 4,"sortProperty": "RoleAssignId/CreatedAt","filterProperty": "RoleAssignId/CreatedAt"}'/>
                    </customData>
                    <Text text="{i18n>createdAt}"/>
                </Column>

                <Column demandPopin="true" minScreenWidth="Tablet">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "RoleAssignId/UpdatedAt", "leadingProperty": "RoleAssignId/UpdatedAt",
                                                 "columnIndex": 5,"sortProperty": "RoleAssignId/UpdatedAt","filterProperty": "RoleAssignId/UpdatedAt"}'/>
                    </customData>
                    <Text text="{i18n>updatedAt}"/>
                </Column>
                <Column demandPopin="true" minScreenWidth="Tablet" hAlign="Initial"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "RoleAssignId/Status", "leadingProperty": "RoleAssignId/Status",
                                                 "columnIndex": 7 ,"sortProperty": "RoleAssignId/Status","filterProperty": "RoleAssignId/Status"}'/>
                    </customData>
                    <Text text="{i18n>action}"/>
                </Column>
               
            </columns>
            <items>
                <ColumnListItem press="onUserRoleDetlPress">
                    <cells>
                        <Text text="{RoleAssignId/UserId}" wrapping="false"/>
                        <Text text="{RoleAssignId/Role}" wrapping="false"/>
                        <Text text="{RoleAssignId/Email}" wrapping="false"/>
                        <Text text="{RoleAssignId/RequestNumber}" wrapping="false"/>
                        <Text text="{path:'RoleAssignId/CreatedAt',
                                     type: 'sap.ui.model.type.Date',
				                     formatOptions: {
				                        pattern: 'MMMM dd, yyyy'
				                     }
                        }" />
                        <Text text="{path:'RoleAssignId/UpdatedAt',
                                     type: 'sap.ui.model.type.Date',
				                     formatOptions: {
				                        pattern: 'MMMM dd, yyyy'
				                     }
                        }" />
                        
                        <HBox alignContent="Center" alignItems="Center" width="100%">
                                <Button text="Approve"  press="onApproveRequestPress" type="Accept" 
                                    visible="{= ${RoleAssignId/Status} === 'PENDING' ? true : false}" class="sapUiTinyMarginEnd"/>
                                <Button text="Reject"  press="onRejectRequestPress" width="125%"
                                    visible="{= ${RoleAssignId/Status} === 'PENDING' ? true : false}" type="Reject"/>
                                <ObjectNumber number="{RoleAssignId/Status}" 
                                    visible="{= ${RoleAssignId/Status} !== 'PENDING' ? true : false}"
                                    state="{= ${RoleAssignId/Status} === 'APPROVED' ? 'Success'  : 'Error' }"/>
                        </HBox>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </smartTable:SmartTable>

</core:FragmentDefinition>