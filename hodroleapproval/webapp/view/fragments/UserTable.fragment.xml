<core:FragmentDefinition xmlns="sap.m"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:core="sap.ui.core">
    <smartTable:SmartTable class="sapUiResponsiveContentPadding" id="idApproveRejectRolesTBL" editable="false" placeToolbarInTable="true" 
    enableAutoBinding="true" entitySet="RoleAssignApprovalRequestSet" showFullScreenButton="true" showRowCount="false" tableType="ResponsiveTable" 
    ignoredFields="UpdatedBy,ID,ApprovedAt,ApprovedBy,IsArchived,CreatedBy,Status" demandPopin="false" useExportToExcel="false" useTablePersonalisation="true" useVariantManagement="false" beforeRebindTable="onBeforeRebindApprovalRequestsTable"  
    >
        <smartTable:layoutData><FlexItemData growFactor="1"/></smartTable:layoutData>
        <Table sticky="ColumnHeaders,HeaderToolbar">
            <columns>
                 <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "UserId", "leadingProperty": "UserId",
                                                 "columnIndex": 0 ,"sortProperty": "UserId","filterProperty": "UserId"}'/>
                    </customData>
                    <Text text="{i18n>UserId}"/>
                </Column>
              
                 <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Role", "leadingProperty": "Role",
                                                 "columnIndex": 1 ,"sortProperty": "Role","filterProperty": "Role"}'/>
                    </customData>
                    <Text text="{i18n>role}"/>
                </Column>

                <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "Email", "leadingProperty": "Email",
                                                 "columnIndex": 2 ,"sortProperty": "Email","filterProperty": "Email"}'/>
                    </customData>
                    <Text text="{i18n>email}"/>
                </Column>
                 <Column demandPopin="true" minScreenWidth="Tablet"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "RequestNumber", "leadingProperty": "RequestNumber",
                                                 "columnIndex": 3 ,"sortProperty": "RequestNumber","filterProperty": "RequestNumber"}'/>
                    </customData>
                    <Text text="{i18n>requestnumber}"/>
                </Column>

                <Column demandPopin="true" minScreenWidth="Tablet">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "CreatedAt", "leadingProperty": "CreatedAt",
                                                 "columnIndex": 4,"sortProperty": "CreatedAt","filterProperty": "CreatedAt"}'/>
                    </customData>
                    <Text text="{i18n>createdAt}"/>
                </Column>

                <Column demandPopin="true" minScreenWidth="Tablet">
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "UpdatedAt", "leadingProperty": "UpdatedAt",
                                                 "columnIndex": 5,"sortProperty": "UpdatedAt","filterProperty": "UpdatedAt"}'/>
                    </customData>
                    <Text text="{i18n>updatedAt}"/>
                </Column>
                <Column demandPopin="true" minScreenWidth="Tablet" hAlign="Initial"> 
                    <customData>
                        <core:CustomData key="p13nData" value='\{"columnKey": "ApprovedBy", "leadingProperty": "ApprovedBy",
                                                 "columnIndex": 7 ,"sortProperty": "ApprovedBy","filterProperty": "ApprovedBy"}'/>
                    </customData>
                    <Text text="{i18n>action}"/>
                </Column>
               
            </columns>
            <items>
                <ColumnListItem press="onUserRoleDetlPress">
                    <cells>
                        <Text text="{UserId}" wrapping="false"/>
                        <Text text="{Role}" wrapping="false"/>
                        <Text text="{Email}" wrapping="false"/>
                        <Text text="{RequestNumber}" wrapping="false"/>
                        <Text text="{path:'CreatedAt',
                                     type: 'sap.ui.model.type.Date',
				                     formatOptions: {
				                        pattern: 'MMMM dd, yyyy'
				                     }
                        }" />
                        <Text text="{path:'UpdatedAt',
                                     type: 'sap.ui.model.type.Date',
				                     formatOptions: {
				                        pattern: 'MMMM dd, yyyy'
				                     }
                        }" />
                        
                        <HBox alignContent="Center" alignItems="Center" width="100%">
                                <Button text="Approve"  press="onApproveRequestPress" type="Accept" 
                                    visible="{= ${Status} === 'PENDING' ? true : false}" class="sapUiTinyMarginEnd"/>
                                <Button text="Reject"  press="onRejectRequestPress" width="125%"
                                    visible="{= ${Status} === 'PENDING' ? true : false}" type="Reject"/>
                                <ObjectNumber number="{Status}" 
                                    visible="{= ${Status} !== 'PENDING' ? true : false}"
                                    state="{= ${Status} === 'APPROVED' ? 'Success'  : 'Error' }"/>
                                    
                        </HBox>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </smartTable:SmartTable>

</core:FragmentDefinition>