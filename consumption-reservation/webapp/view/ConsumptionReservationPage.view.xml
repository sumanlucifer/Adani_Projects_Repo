<mvc:View controllerName="com.agel.mmts.consumptionreservation.controller.ConsumptionReservationPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:ui="sap.ui.table"
    xmlns:fm="sap.ui.layout.form"
    xmlns:f="sap.f">
    <f:DynamicPage showFooter="true" headerExpanded="true" busy="{objectViewModel>/busy}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title id="pageTitle" text="Create Consumption Reservation"/>
                </f:heading>
                <f:actions>
                    <HBox visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                        <Button text="Save" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                        <Button text="Cancel" class="sapUiTinyMarginBegin" press="onCancelReservation" />
                    </HBox>
                    <!-- <Button text="Raise Return Material Request" press="onConfirmRequest" type="Emphasized"/> -->
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <HBox alignContent="SpaceAround">
                        <HBox>
                            <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="4" singleContainerFullSize="true" class="style-RemoveTitleHeight">
                                <!-- <core:Title  /> -->
                                <Label text="Movement Type" required="true"/>
                                <Select id="idSelMovementType" change="onMoventTypeChange" editable="false" selectedKey="201" forceSelection="false" items="{HeaderDetailsModel>/movementType}">
                                    <core:Item key="{HeaderDetailsModel>value}" text="{HeaderDetailsModel>Text}" />
                                </Select>
                                <Label text="Good Recipient/SO Number" required="true"/>
                                <Input id="idGoodReciept" value="{HeaderDetailsModel>GoodRecipient}" />
                                <Label text="WBS" required="true"/>
                                <Input id="idWBS" value="{HeaderDetailsModel>WBS}" />
                                <Label text="Plant" required="true"/>
                                <Select id="idSelPlant" forceSelection="false" selectedKey="{HeaderDetailsModel>Plant}" items="{
						    path: '/MasterPlantDetailSet'						    
					    }">
                                    <core:Item key="{PlantId}" text="{PlantId} - {Name}" />
                                </Select>
                                <!-- <core:Title ></core:Title> -->
                                <Label text="Profit Center" required="true"/>
                                <Input id="idProfitCenter" value="{HeaderDetailsModel>ProfitCenter}" />
                                <Label text="GL Account" required="true"/>
                                <Input id="idGLAccount" value="{HeaderDetailsModel>GLAccount}" />
                                <Label text="Cost Center" required="true"/>
                                <Input id="idCostCenter" value="{HeaderDetailsModel>CostCenter}" />
                                <Label></Label>
                                <Button width="50%" class="sapUiSmallMarginTop" text="Go" type="Emphasized" press="onPressGo">
                                    <layoutData>
                                        <l:GridData span="XL2 L3 M4 S4" />
                                    </layoutData>
                                </Button>
                                <Button visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}" width="50%" id="idResetButton" class="sapUiSmallMarginTop" text="Reset" type="Emphasized" press="onPressReset"></Button>
                            </fm:SimpleForm>
                        </HBox>
                    </HBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <!-- DynamicPage Content -->
        <f:content>
            <VBox>
                <ui:TreeTable visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}" id="TreeTable" rows="{path:'TreeDataModel>/', parameters: {arrayNames:['results']}}" selectionMode="None" enableSelectAll="false" ariaLabelledBy="title" rowsUpdated="onRowsUpdated">
                    <ui:columns>
                        <ui:Column width="8%" hAlign="Center">
                            <Label text="Select" />
                            <ui:template>
                                <CheckBox visible="{= ${TreeDataModel>isParent} ? true : false}" selected="{TreeDataModel>isSelected}" select="onSelectionOfRow" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="Material Code"/>
                            <ui:template>
                                <Text text="{TreeDataModel>MaterialCode}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="Description"/>
                            <ui:template>
                                <Text text="{TreeDataModel>Description}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="Plant"/>
                            <ui:template>
                                <Text text="{TreeDataModel>Plant}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="Storage Location"/>
                            <ui:template>
                                <Text text="{TreeDataModel>StorageLocation}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="Issued Quantity"/>
                            <ui:template>
                                <Text text="{TreeDataModel>IssuedQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="Balanced Quantityty"/>
                            <ui:template>
                                <Text text="{TreeDataModel>BalanceQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="ReservedQty"/>
                            <ui:template>
                                <Input visible="{= ${TreeDataModel>isParent} ? true : false}" value="{TreeDataModel>Quantity}" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label   text="Status"/>
                            <ui:template>
                                 <ObjectStatus  text="{TreeDataModel>Status}"  state="{= ${TreeDataModel>Status} === 'ISSUED' ? 'Success' : ${Status} === 'RESERVED FOR ISSUE' ? 'Information' : 'Error'}" visible="{= ${Status}.length>0 ? true : false }"/>
                            </ui:template>
                        </ui:Column>
                    </ui:columns>
                </ui:TreeTable>
            </VBox>
        </f:content>
        <!-- <f:footer>
            <OverflowToolbar visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                <ToolbarSpacer/>
                <Button text="Save" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                <Button text="Cancel" class="sapUiTinyMarginBegin" press="onCancelReservation" />
            </OverflowToolbar>
        </f:footer> -->
    </f:DynamicPage>
</mvc:View>
