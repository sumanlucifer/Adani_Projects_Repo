<mvc:View controllerName="com.agel.mmts.consumptionreservation.controller.ConsumptionReservationPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:fm="sap.ui.layout.form"
    xmlns:f="sap.f">
    <f:DynamicPage showFooter="true" headerExpanded="true" busy="{objectViewModel>/busy}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title id="pageTitle" text="Create Consumption Reservation"/>
                </f:heading>
                <f:actions>
                    <!-- <Button text="Raise Return Material Request" press="onConfirmRequest" type="Emphasized"/> -->
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <HBox alignContent="SpaceAround">

                        <HBox>
                            <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="4" singleContainerFullSize="true" class="style-RemoveTitleHeight">
                                <!-- <core:Title  /> -->
                                <Label text="Movement Type" required="true"/>
                                <Select id="idSelMovementType" change="onMoventTypeChange" editable="false" selectedKey="201" forceSelection="false" items="{HeaderDetailsModel>/movementType}">
                                    <core:Item key="{HeaderDetailsModel>value}" text="{HeaderDetailsModel>Text}" />
                                </Select>
                                <Label text="Good Recipient/SO Number" required="true"/>
                                <Input id="idGoodReciept" value="{HeaderDetailsModel>GoodReciepient}" />
                                <Label text="WBS" required="true"/>
                                <Input id="idWBS" value="{HeaderDetailsModel>WBS}" />
                                <Label text="Plant" required="true"/>

                                <Select id="idSelPlant" forceSelection="false" selectedKey="{HeaderDetailsModel>Plant}" items="{
						    path: '/MasterPlantDetailSet'						    
					    }">
                                    <core:Item key="{PlantId}" text="{PlantId} - {Name}" />
                                </Select>
                                <!-- <core:Title ></core:Title> -->


                                <Label text="GL Account" required="true"/>
                                <Input id="idGLAccount" value="{HeaderDetailsModel>GLAccount}" />

                                <Label 
                                ></Label>
<Button class="sapUiSmallMarginTop" width="10px" text="Go" type="Emphasized" press="onPressGo"></Button>
                            </fm:SimpleForm>

                        </HBox>

                    </HBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <!-- DynamicPage Content -->
        <f:content>
            <VBox>
                <Table items="{reservationTableModel>/}" growingThreshold="5" growing="true" fixedLayout="false">
                    <headerToolbar>
                        <OverflowToolbar >
                            <Title text="{i18n>lineItems}" level="H4" />
                            <content>
                                <ToolbarSpacer></ToolbarSpacer>

                            </content>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column >
                            <Text text="Material Name"/>
                        </Column>
                        <Column>
                            <Text text="Description"/>
                        </Column>
                        <Column>
                            <Text text="Quantity"/>
                        </Column>
                         <Column>
                            <Text text="Consumption Quantity"/>
                        </Column>
                        <Column>
                            <Text text="UOM"/>
                        </Column>
                        <Column width="5%">
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem >
                            <cells>
                                <Input suggestionItemSelected="onMaterialCodeChange" selectedKey="{reservationTableModel>MaterialCode}" selectedItem="{reservationTableModel>MaterialCode}" id="idPMaterialCode" showSuggestion="true" suggestionRows="{
                                                path: '/MasterMaterialSet',
                                                templateShareable:false
                                            }">
                                    <suggestionColumns>
                                        <Column demandPopin="true">
                                            <Label text="Material Name" />
                                        </Column>
                                        <Column demandPopin="true" minScreenWidth="Tablet">
                                            <Label text="Description" />
                                        </Column>
                                        <Column hAlign="End" minScreenWidth="Tablet">
                                            <Label text="UOM" />
                                        </Column>
                                    </suggestionColumns>
                                    <suggestionRows>
                                        <ColumnListItem>
                                            <Text text="{MaterialCode}" />
                                            <Text wrapping="true" text="{Description}" />
                                            <Text text="{UOM}" />
                                        </ColumnListItem>
                                    </suggestionRows>
                                </Input>
                                <Text text="{reservationTableModel>MaterialName}"/>
                                <Text width="30%" text="{reservationTableModel>Qty}"/>
                                  <Input width="30%" value="{reservationTableModel>ConsumptionQuantity}"/>
                                <Text text="{reservationTableModel>BaseUnit}"/>
                                <Button icon="sap-icon://delete" press="onDeleteReservationItemPress" type="Transparent"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>
        <f:footer>
            <OverflowToolbar visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                <ToolbarSpacer/>
                <Button text="Save" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                <Button text="Cancel" class="sapUiTinyMarginBegin" press="onCancelReservation" />
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>

</mvc:View>
