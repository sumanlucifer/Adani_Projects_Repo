<mvc:View controllerName="com.agel.mmts.consumptionreservation.controller.ConsumptionReservationPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:ui="sap.ui.table"
    xmlns:fm="sap.ui.layout.form"
    xmlns:f="sap.f">
    <f:DynamicPage showFooter="true" headerExpanded="true" busy="{objectViewModel>/busy}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title id="pageTitle" text="Create Consumption Reservation"/>
                </f:heading>
                <f:actions>
                    <HBox visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                        <Button text="Save" id="idBtnSave" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                        <Button text="Reset" class="sapUiTinyMarginBegin" press="onCancelReservation" />
                    </HBox>
                    <!-- <Button text="Raise Return Material Request" press="onConfirmRequest" type="Emphasized"/> -->
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <Toolbar>
                        <ToolbarSpacer />
                        <Button visible="{= ${objectViewModel>/isButtonVisible} ? true : false}" text="Go" type="Emphasized" press="onPressGo"/>
                    </Toolbar>
                    <VBox alignContent="SpaceBetween">
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="3" singleContainerFullSize="true" class="style-RemoveTitleHeight">
                            <!-- <core:Title  /> -->
                            <Label text="{i18n>MovementType}"  required="true"/>
                            <Select id="idSelMovementType" change="onMoventTypeChange" editable="false" selectedKey="201" forceSelection="false" items="{HeaderDetailsModel>/movementType}">
                                <core:Item key="{HeaderDetailsModel>value}" text="{HeaderDetailsModel>Text}" />
                            </Select>
                            <Label text="{i18n>GoodRecipientSONumber}"  required="true"/>
                            <Input id="idGoodReciept" value="{HeaderDetailsModel>GoodRecipient}" />
                            <Label text="{i18n>Plant}"  required="true"/>
                            <Select id="idSelPlant" forceSelection="false" selectedKey="{HeaderDetailsModel>Plant}" items="{
						    path: '/MasterPlantDetailSet'						    
					    }">
                                <core:Item key="{PlantId}" text="{PlantId} - {Name}" />
                            </Select>
                        </fm:SimpleForm>
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="3" singleContainerFullSize="false" class="style-RemoveTitleHeight">
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>WBS}"   required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idWBS" value="{HeaderDetailsModel>WBS}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>ProfitCenter}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idProfitCenter" value="{HeaderDetailsModel>ProfitCenter}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>GLAccount}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idGLAccount" value="{HeaderDetailsModel>GLAccount}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>CostCenter}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idCostCenter" value="{HeaderDetailsModel>CostCenter}" />
                        </fm:SimpleForm>
                    </VBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <!-- DynamicPage Content -->
        <f:content>
            <!-- <VBox>
                <ui:TreeTable visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}" id="TreeTable" rows="{path:'TreeDataModel>/', parameters: {numberOfExpandedLevels: 2,arrayNames:['results']}}" selectionMode="None" enableSelectAll="false" ariaLabelledBy="title" rowsUpdated="onRowsUpdated">
                    <ui:columns>
                        <ui:Column width="8%" hAlign="Center">
                            <Label text="{i18n>Select}" />
                            <ui:template>
                                <CheckBox visible="{= ${TreeDataModel>isParent} ? true : false}" selected="{TreeDataModel>isSelected}" select="onSelectionOfRow" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>ReservationNo}" />
                            <ui:template>
                                <Text text="{TreeDataModel>ReservationNumber}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>MaterialDocumentNumber}" />
                            <ui:template>
                                <Text text="{TreeDataModel>MaterialDocumentNumber}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>MaterialDocumentYear}" />
                            <ui:template>
                                <Text text="{TreeDataModel>MaterialDocumentYear}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>MaterialCode}" />
                            <ui:template>
                                <Text text="{TreeDataModel>MaterialCode}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>Plant}" />
                            <ui:template>
                                <Text text="{TreeDataModel>Plant}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>Description}" />
                            <ui:template>
                                <Text text="{TreeDataModel>Description}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>StorageLocation}" />
                            <ui:template>
                                <Text text="{TreeDataModel>StorageLocation}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>IssuedQuantity}" />
                            <ui:template>
                                <Text text="{TreeDataModel>IssuedQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>BalancedQuantity}" />
                            <ui:template>
                                <Text text="{TreeDataModel>BalanceQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>ReservedQuantity}" />
                            <ui:template>
                                <Input liveChange="onLiveChangeReservedQty" visible="{= ${TreeDataModel>isParent} ? true : false}" value="{TreeDataModel>Quantity}" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>Status}" />
                            <ui:template>
                                <ObjectStatus text="{TreeDataModel>Status}" state="{= ${TreeDataModel>Status} === 'ISSUED' ? 'Success' : ${Status} === 'RESERVED FOR ISSUE' ? 'Information' : 'Error'}" visible="{= ${Status}.length>0 ? true : false }"/>
                            </ui:template>
                        </ui:Column>
                    </ui:columns>
                </ui:TreeTable>
            </VBox> -->

<VBox>


  <Table visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}" id="idConsumedTable" growing="true" growingThreshold="10" items="{consumptionData>/}">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <content>

                                    </content>
                                </OverflowToolbar>
                            </headerToolbar>
                            <columns>
                                <Column width="5%">
                                    <CheckBox select="onSelectAll"></CheckBox>
                                </Column>
                                <Column>
                                    <Text text="{i18n>ReservationNo}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>MaterialDocumentNumber}" />
                                </Column>


                                <Column demandPopin="true" minScreenWidth="Desktop">
                                    <Text text="{i18n>MaterialDocumentYear}" />
                                </Column>
                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>MaterialCode}" />
                                </Column>

                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>Plant}" />
                                </Column>
                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>Description}" />
                                </Column>


                                                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>StorageLocation}" />
                                </Column>

                                                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>IssuedQuantity}" />
                                </Column>

                                                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>BalancedQuantity}" />
                                </Column>

                                                                <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>ReservedQuantity}" />
                                </Column>

                                                   <Column demandPopin="true" minScreenWidth="Tablet">
                                    <Text text="{i18n>Status}" />
                                </Column>


                            </columns>
                            <items>
                                <ColumnListItem id="idBOQItems">
                                    <cells>
                                        <CheckBox selected="{consumptionData>isSelected}" select="onSelectionOfRow" />
                                        <Text text="{consumptionData>ReservationNumber}"/>
                                        <Text text="{consumptionData>MaterialDocumentNumber}"/>

                                        <Text text="{consumptionData>MaterialDocumentYear}"/>
                                        <Text text="{consumptionData>MaterialCode}"/>
                                        <Text text="{consumptionData>Plant}"/>
                                             <Text text="{consumptionData>Description}"/>
                                             <Text text="{consumptionData>StorageLocation}"/>
                                        <Text text="{consumptionData>IssuedQty}"/>

                                    <Text text="{consumptionData>BalanceQty}"/>
                                                                    <Input liveChange="onLiveChangeReservedQty" enabled="{consumptionData>isSelected}" visible="{= ${TreeDataModel>isParent} ? true : false}" value="{consumptionData>Quantity}" />
                                        <ObjectStatus text="{consumptionData>Status}" state="{= ${consumptionData>Status} === 'CONSUMPTION SUCCESSFUL' ? 'Success' : ${consumptionData>Status} === 'RESERVED FOR CONSUMPTION' ? 'Information' : 'Error'}" visible="{= ${Status}.length>0 ? true : false }"/>

                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>

                        </VBox>


        </f:content>
        <!-- <f:footer>
            <OverflowToolbar visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                <ToolbarSpacer/>
                <Button text="Save" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                <Button text="Cancel" class="sapUiTinyMarginBegin" press="onCancelReservation" />
            </OverflowToolbar>
        </f:footer> -->
    </f:DynamicPage>
</mvc:View>
