<mvc:View controllerName="com.agel.mmts.returnreservation.controller.ReturnReservationPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:ui="sap.ui.table"
    xmlns:fm="sap.ui.layout.form"
    xmlns:f="sap.f">
    <f:DynamicPage showFooter="true" headerExpanded="true" busy="{objectViewModel>/busy}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title id="pageTitle" text="{i18n>CreateReturnReservation}"/>
                </f:heading>
                <f:actions>
                    <HBox visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                        <Button text="{i18n>Save}" id="idBtnSave" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                        <Button text="{i18n>Reset}" class="sapUiTinyMarginBegin" press="onCancelReservation" />
                    </HBox>
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <Toolbar>
                        <ToolbarSpacer />
                        <Button visible="{= ${objectViewModel>/isButtonVisible} ? true : false}" text="{i18n>Go}" type="Emphasized" press="onPressGo"/>
                    </Toolbar>
                    <VBox alignContent="SpaceBetween">
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="3" singleContainerFullSize="true" class="style-RemoveTitleHeight">
                            <!-- <core:Title  /> -->
                            <Label text="{i18n>MovementType}"  required="true"/>
                            <Select id="idSelMovementType" change="onMoventTypeChange" editable="false" selectedKey="311" forceSelection="false" items="{HeaderDetailsModel>/movementType}">
                                <core:Item key="{HeaderDetailsModel>value}" text="{HeaderDetailsModel>Text}" />
                            </Select>
                            <Label text="{i18n>GoodRecipientSONumber}"  required="true"/>
                            <Input id="idGoodReciept" value="{HeaderDetailsModel>GoodRecipient}" />
                            <Label text="{i18n>Plant}"  required="true"/>
                            <Select id="idSelPlant" forceSelection="false" selectedKey="{HeaderDetailsModel>Plant}" items="{
						    path: '/MasterPlantDetailSet'						    
					    }">
                                <core:Item key="{PlantId}" text="{PlantId} - {Name}" />
                            </Select>
                        </fm:SimpleForm>
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="3" singleContainerFullSize="false" class="style-RemoveTitleHeight">

                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>WBS}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idWBS" value="{HeaderDetailsModel>WBS}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>ProfitCenter}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idProfitCenter" value="{HeaderDetailsModel>ProfitCenter}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>GLAccount}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idGLAccount" value="{HeaderDetailsModel>GLAccount}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>CostCenter}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idCostCenter" value="{HeaderDetailsModel>CostCenter}" />
                            <Label visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" text="{i18n>RecievingLocation}"  required="true"/>
                            <Input visible="{= ${objectViewModel>/isHeaderFieldsVisible} ? true : false}" id="idRecievingLoc" value="{HeaderDetailsModel>ReceivingLocation}" />
                        </fm:SimpleForm>
                    </VBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <!-- DynamicPage Content -->
        <f:content>
            <VBox>
                <ui:TreeTable visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}" id="TreeTable" rows="{path:'TreeDataModel>/', parameters: {numberOfExpandedLevels: 2,arrayNames:['results']}}" 
                selectionMode="None" enableSelectAll="false" ariaLabelledBy="title" rowsUpdated="onRowsUpdated">
                    <ui:columns>
                        <!-- <ui:Column width="8%" hAlign="Center">
                            <Label text="{i18n>Select}" />
                            <ui:template>
                                <CheckBox visible="{= ${TreeDataModel>isParent} ? true : false}" selected="{TreeDataModel>isSelected}" select="onSelectionOfRow" />
                            </ui:template>
                        </ui:Column> -->
                        <ui:Column>
                            <Label text="{i18n>Name}" />
                            <ui:template>
                                <Text text="{TreeDataModel>Name}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>Description}" />
                            <ui:template>
                                <Text text="{TreeDataModel>Description}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>MaterialCode}" />
                            <ui:template>
                                <Text text="{TreeDataModel>MaterialCode}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>BalanceQty}" />
                            <ui:template>
                                <Text text="{TreeDataModel>BalanceQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>UOM}" />
                            <ui:template>
                                <Text text="{TreeDataModel>UOM}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <!-- <ui:Column>
                            <Label text="{i18n>Description}" />
                            <ui:template>
                                <Text text="{TreeDataModel>Description}" wrapping="false" />
                            </ui:template>
                        </ui:Column> -->
                        <ui:Column>
                            <Label text="{i18n>StorageLocation}" />
                            <ui:template>
                                <Text text="{TreeDataModel>StorageLocation}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>BaseQty}" />
                            <ui:template>
                                <Text text="{TreeDataModel>BaseQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>BaseUnit}" />
                            <ui:template>
                                <Text text="{TreeDataModel>BaseUnit}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>IssuedQuantity}" />
                            <ui:template>
                                <Text text="{TreeDataModel>IssuedQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>WeightPerPiece}" />
                            <ui:template>
                                <Text text="{TreeDataModel>WeightPerPiece}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>BalancedQuantity}" />
                            <ui:template>
                                <Text text="{TreeDataModel>BalanceQty}" wrapping="false" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>ReservedQuantity}" />
                            <ui:template>
                                <Input  liveChange="onLiveChangeReservedQty"  enabled="{= ${TreeDataModel>isChildItemFreeze} ? true : false}" value="{TreeDataModel>Quantity}" />
                            </ui:template>
                        </ui:Column>
                        <ui:Column>
                            <Label text="{i18n>Status}" />
                            <ui:template>
                                <ObjectStatus text="{TreeDataModel>Status}" state="{= ${TreeDataModel>Status} === 'ISSUED' ? 'Success' : ${Status} === 'RESERVED FOR ISSUE' ? 'Information' : 'Error'}" visible="{= ${Status}.length>0 ? true : false }"/>
                            </ui:template>
                        </ui:Column>
                    </ui:columns>
                </ui:TreeTable>
            </VBox>
        </f:content>
        <!-- <f:footer>
            <OverflowToolbar visible="{= ${objectViewModel>/isItemFieldsVisible} ? true : false}">
                <ToolbarSpacer/>
                <Button text="Save" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                <Button text="Cancel" class="sapUiTinyMarginBegin" press="onCancelReservation" />
            </OverflowToolbar>
        </f:footer> -->
    </f:DynamicPage>
</mvc:View>
