sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/model/Sorter","sap/ui/Device","sap/ui/core/ValueState"],function(e,t,s,a,i,r,o,u){"use strict";return e.extend("com.agel.mmts.raisereturnmaterial.controller.RaiseRequestPage",{onInit:function(){this.oRouter=this.getRouter();this.oRouter.getRoute("RaiseRequestPage").attachPatternMatched(this._onObjectMatched,this);var e=new t({busy:false,delay:0});this.setModel(e,"objectViewModel");this.MainModel=this.getComponentModel();this.getView().setModel(this.MainModel)},_onObjectMatched:function(e){},onSearch:function(){var e=this;this.validateSONumber()},onChangeSONumber:function(e){debugger;var t=e.getSource().getValue();if(!t.match(/^\d{4}$/)){this.getView().byId("idSoNumber").setValueState("Error");this.getView().byId("idSoNumber").setValueStateText("Please Enter upto 10 digit Number");this.getView().byId("SObtnSubmit").setEnabled(false);return}else{this.getView().byId("idSoNumber").setValueState("None");this.getView().byId("idSoNumber").setValueStateText(null);this.getView().byId("SObtnSubmit").setEnabled(true)}},validateSONumber:function(){var e=this;var t=this.getView().byId("idSoNumber").getValue();e.sObjectId=t+"l";var s=new sap.ui.model.Filter({path:"SONumber",operator:sap.ui.model.FilterOperator.EQ,value1:t});var a=[];a.push(s);this.MainModel.read("/SONumberDetailsSet",{filters:[a],success:function(t,s){if(t){if(t.results.length){e.oRouter.navTo("RaiseRequestDetailPage",{SOId:t.results[0].ID},false)}else{sap.m.MessageBox.error("Please Enter Valid SO Number")}}else{sap.m.MessageBox.error("Please Enter Valid SO Number")}}.bind(this),error:function(e){sap.m.MessageBox.error(JSON.stringify(e))}})},onReadDataIssueMaterials:function(){var e=this;var s=this.byId("idTblIssueMaterialItems");s.setVisible(true);e.oIssueMaterialModel=new t;this.MainModel.read("/SONumberDetailsSet("+e.sObjectId+")/IssuedMaterials",{success:function(t,a){e.oIssueMaterialModel.setData({Items:t.results});s.setModel(e.oIssueMaterialModel,"oIssueMaterialModel")}.bind(this),error:function(e){sap.m.MessageBox.error("Data Not Found")}})}})});