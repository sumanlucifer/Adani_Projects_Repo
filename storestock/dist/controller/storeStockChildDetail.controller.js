sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/model/Sorter","sap/ui/Device","sap/ui/core/ValueState"],function(e,t,i,o,a,n,r,s){"use strict";return e.extend("com.agel.mmts.storestock.controller.storeStockChildDetail",{onInit:function(){this.getView().addEventDelegate({onAfterShow:this.onBeforeShow},this);var e=new t({busy:false,delay:0});this.setModel(e,"objectViewModel");this.oRouter=this.getRouter();this.oRouter.getRoute("storeStockChildDetail").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){var t=e.getParameter("arguments").layout;var i=e.getParameter("arguments").parentMaterial;this._bindView("/RestrictedStoreStockParentSet"+i);this.getView().getModel("layoutModel").setProperty("/layout",t)},_bindView:function(e){var t=this.getViewModel("objectViewModel");var i=this;this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(i),dataRequested:function(){t.setProperty("/busy",true)},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getViewModel("objectViewModel"),i=e.getElementBinding();if(!i.getBoundContext()){this.getRouter().getTargets().display("notFound");return}},onSearch:function(e){var t=this.byId("idChildMaterialName").getValue();var a=this.byId("idChildMaterialCode").getValue();var n=[];var r=[];if(t!=""){n.push(new i("Name",o.EQ,t))}if(a!=""){n.push(new i("MaterialCode",o.EQ,a))}r.push(new i(n,false));var s=this.getView().byId("idStoreStockChildTable").getTable().getBinding("items");if(r.length>0){s.filter(new i(r,true))}},onCloseChildPage:function(e){this._showObject(e.getSource())},_showObject:function(e){var t=this;var i=e.getBindingContext().sPath;this.oRouter.navTo("RouteApp",{parentMaterial:1,layout:"OneColumn"},false);this.getView().getModel("layoutModel").setProperty("/layout","OneColumn")}})});