sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/model/Sorter","sap/ui/Device","sap/ui/core/ValueState"],function(e,t,n,i,a,r,o,s){"use strict";return e.extend("com.agel.mmts.storestock.controller.storeStockParentDetail",{onInit:function(){this.oRouter=this.getRouter();var e=this.getOwnerComponent().getModel("layoutModel");e.setProperty("/layout","OneColumn");var n=new t({restrictedCount:null,unrestrictedCount:null});this.setModel(n,"oIconTabCountModel");var i=new t({PlntItems:[]});this.setModel(i,"PlantModel");var a=[{key:"4500327800",value:"AG-234"},{key:"4500327801",value:"AG-34"},{key:"4600327832",value:"AG-67"}];this.getViewModel("PlantModel").setProperty("/PlntItems",a)},_onObjectMatched:function(e){var t=this.getOwnerComponent().getComponentData().startupParameters;this.type=t.Kind[0];this.byId("idIconTabBar").setSelectedKey(this.type);this.onIconTabBarChanged(this.type)},onBeforeRebindUnrestTable:function(e){var t=e.getParameter("bindingParams")},onBeforeRebindRestTable:function(e){var t=e.getParameter("bindingParams")},onSearch:function(e){var t=this.byId("idParentMaterialName").getValue();var a=this.byId("idParentMaterialCode").getValue();var r=this.byId("idSelPlant").getSelectedKey();var o=[];var s=[];if(r!==""){this.byId("idParentUnRestrictedTable").mProperties.enableAutoBinding=true;this.byId("idParentUnRestrictedTable").rebindTable();this.byId("idParentRestrictedTable").mProperties.enableAutoBinding=true;this.byId("idParentRestrictedTable").rebindTable();o.push(new n("PlantCode",i.EQ,r))}else{this.byId("unrestrictedTable").setNoDataText(this.getResourceBundle().getText("EnterPlant"));this.byId("restrictedTable").setNoDataText(this.getResourceBundle().getText("EnterPlant"));return false}if(t!=""){o.push(new n("Name",i.EQ,t))}if(a!=""){o.push(new n("MaterialCode",i.EQ,a))}s.push(new n(o,false));var l=this.getView().byId("idParentUnRestrictedTable").getTable().getBinding("items");var d=this.getView().byId("idParentRestrictedTable").getTable().getBinding("items");if(s.length>0){l.filter(new n(s,true));d.filter(new n(s,true))}},onRestrictdParentTablePress:function(e){this._showObject(e.getSource())},_showObject:function(e){var t=this;var n=e.getBindingContext().sPath;this.oRouter.navTo("storeStockChildDetail",{parentMaterial:n.slice("/RestrictedStoreStockParentSet".length),layout:"TwoColumnsMidExpanded"},false)},onRestrictedStockUpdateFinished:function(e){this.setIconTabCount(e,e.getParameter("total"),"/restrictedCount")},onUnrestrictedStockUpdateFinished:function(e){this.setIconTabCount(e,e.getParameter("total"),"/unrestrictedCount")},setIconTabCount:function(e,t,n){if(e.getSource().getBinding("items").isLengthFinal()){this.getView().getModel("oIconTabCountModel").setProperty(n,t)}}})});