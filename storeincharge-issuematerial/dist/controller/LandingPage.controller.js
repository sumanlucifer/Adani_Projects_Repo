sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/m/Button"],function(e,t,s,i,a,o){"use strict";return e.extend("com.agel.mmts.storeinchargeissuematerial.controller.LandingPage",{onInit:function(){this.oRouter=this.getRouter();this.oRouter.getRoute("RouteLandingPage").attachPatternMatched(this._onObjectMatched,this);var e=new t({busy:false,delay:0});this.setModel(e,"objectViewModel");var s=new t({issueCount:null,issuereservedCount:null});this.setModel(s,"oIconTabCountModel")},_onObjectMatched:function(e){},onIssueTableUpdateFinished:function(e){this.setIconTabCount(e,e.getParameter("total"),"/issueCount")},onIssueReservedTableUpdateFinished:function(e){this.setIconTabCount(e,e.getParameter("total"),"/issuereservedCount")},setIconTabCount:function(e,t,s){if(e.getSource().getBinding("items").isLengthFinal()){this.getView().getModel("oIconTabCountModel").setProperty(s,t)}},onbeforeRebindListIssueTable:function(e){var t=e.getParameter("bindingParams");t.sorter.push(new sap.ui.model.Sorter("CreatedAt",true));var s=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"ISSUED");var i=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"PARTIALLY CANCELLED");t.filters.push(s,i)},onbeforeRebindIssueReservedTable:function(e){var t=e.getParameter("bindingParams");t.sorter.push(new sap.ui.model.Sorter("CreatedAt",true));var s=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"RESERVED FOR ISSUE");var i=new sap.ui.model.Filter("Status",sap.ui.model.FilterOperator.EQ,"PARTIALLY ISSUED");t.filters.push(s,i)},onIconTabBarChanged:function(e){if(e==="IssueKey"){this.byId("pageTitle").setText(this.getResourceBundle().getText("PageTitle"))}else if(e==="IssueReservedKey"){this.byId("pageTitle").setText(this.getResourceBundle().getText("PageTitle"))}},onIconTabSelect:function(e){var t=this;var s=e.getParameter("key");if(s==="IssueKey"){this.byId("pageTitle").setText(this.getResourceBundle().getText("PageTitle"))}else if(s==="IssueReservedKey"){this.byId("pageTitle").setText(this.getResourceBundle().getText("PageTitle"))}},onDetailPress:function(e){this._showObjectList(e.getSource())},_showObjectList:function(e){var t=this;var s=e.getBindingContext().sPath;t.getRouter().navTo("RaiseIssueScanQRCode",{ID:s.slice("/IssuedMaterialReserveSet".length)})},onDetailPressIssueMaterial:function(e){this._showObjectListIssueMaterial(e.getSource())},_showObjectListIssueMaterial:function(e){var t=this;var s=e.getBindingContext().sPath;t.getRouter().navTo("IssuedMaterialDetails",{ID:s.slice("/IssuedMaterialSet".length)})}})});